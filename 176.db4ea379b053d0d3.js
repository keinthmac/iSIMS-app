"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[176],{5176:(lt,N,a)=>{a.r(N),a.d(N,{MeetingModule:()=>nt});var f=a(6814),k=a(8184);function S(o,r,t,i,n,s,c){try{var l=o[s](c),d=l.value}catch(p){return void t(p)}l.done?r(d):Promise.resolve(d).then(i,n)}function C(o){return function(){var r=this,t=arguments;return new Promise(function(i,n){var s=o.apply(r,t);function c(d){S(s,i,n,c,l,"next",d)}function l(d){S(s,i,n,c,l,"throw",d)}c(void 0)})}}var h=a(9862),u=a(6223),j=a(3562),V=a(6676),m=a.n(V),y=a(7921),F=a(7398),W=a(4716),z=a(6973),E=a(305);function L(o,r){const t="object"==typeof r;return new Promise((i,n)=>{const s=new E.Hp({next:c=>{i(c),s.unsubscribe()},error:n,complete:()=>{t?i(r.defaultValue):n(new z.K)}});o.subscribe(s)})}var e=a(5879),A=a(6878),U=a(553),x=a(6306),v=a(8504),b=a(4664),Z=a(2096);let B=(()=>{class o{constructor(t){this._httpClient=t,this.apiHost=U.N.apiHost}set accessToken(t){sessionStorage.removeItem("access_token"),sessionStorage.setItem("access_token",t)}get accessToken(){return sessionStorage.getItem("access_token")??""}Upload(t){return this._httpClient.post(`${this.apiHost}meeting/media`,t,{reportProgress:!0,observe:"events"}).pipe((0,x.K)(i=>(0,v._)(i)),(0,b.w)(i=>(0,Z.of)(i)))}GetMedia(t){let i=new h.WM;i=i.set("Content-Type","application/json");let n=new h.LE;for(let s of t)n=n.append(s.field,s.value);return this._httpClient.get(`${this.apiHost}meeting/media`,{params:n}).pipe((0,x.K)(s=>(0,v._)(s)),(0,b.w)(s=>(0,Z.of)(s)))}GetThumbnail(t){return this._httpClient.get(`${this.apiHost}${t}`,{responseType:"blob"}).pipe((0,x.K)(i=>(0,v._)(i)),(0,b.w)(i=>(0,Z.of)(i)))}generateKeys(t){return this._httpClient.post(`${this.apiHost}registration/generate-keys`,{depotId:t}).pipe((0,x.K)(i=>(0,v._)(i)),(0,b.w)(i=>(0,Z.of)(i)))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var G=a(4505),J=a(6385),Q=a(617),q=a(965),_=a(4187),O=a(2400),w=a(1819),H=a(4678),P=a(1438),K=a(9925),g=a(1545),T=a(8034),Y=a(8424),M=a(1242);const R=["meetingStepper"];function $(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",50)(1,"div",51)(2,"span",52),e._uU(3,"Congrats "),e.TgZ(4,"span",6),e._uU(5),e.qZA(),e._uU(6,"!"),e.qZA()(),e.TgZ(7,"span",53),e._uU(8,"We have successfully submitted your media upload!"),e.qZA(),e._UZ(9,"mat-icon",54),e.TgZ(10,"span",55),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.backToForms())}),e._uU(11,"Go Back"),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Oqu(null==t.userData?null:t.userData.nickname),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:badge-check")}}function X(o,r){if(1&o&&(e.TgZ(0,"fuse-alert",56),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.Q6J("appearance","outline")("showIcon",!1)("type",t.alert.type)("@shake","error"===t.alert.type),e.xp6(1),e.hij(" ",t.alert.message," ")}}function ee(o,r){1&o&&e._uU(0,"Meeting Information")}function te(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",57),e._uU(2),e.qZA(),e.BQk()),2&o){const t=r.$implicit;e.xp6(1),e.Q6J("value",t.weekNum),e.xp6(1),e.hij(" ",t.weekName," ")}}function ie(o,r){1&o&&(e.TgZ(0,"span",60),e._uU(1,"Next"),e.qZA())}function oe(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ie,2,0,"span",58),e.TgZ(2,"span",59),e._uU(3,"Next"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!(""==(t.firstFormGroup.get("weekNumber").value||"")||""==(t.firstFormGroup.get("isMidweek").value||"")))}}function ne(o,r){if(1&o&&(e.TgZ(0,"div",26)(1,"div",61)(2,"span",62),e._uU(3),e.qZA(),e._UZ(4,"mat-progress-spinner",63),e.qZA()()),2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.meetingCheckString),e.xp6(1),e.Q6J("diameter",24)("mode","indeterminate")}}function re(o,r){1&o&&e._uU(0,"Public Talk Information")}function se(o,r){1&o&&e._UZ(0,"mat-divider")}function ae(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",57),e._uU(2),e.qZA(),e.YNc(3,se,1,0,"mat-divider",28),e.BQk()),2&o){const t=r.$implicit,i=r.index;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",null==t?null:t.name," "),e.xp6(1),e.Q6J("ngIf",0==i)}}function le(o,r){1&o&&e._UZ(0,"mat-divider")}function ue(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"mat-option",80),e._uU(2),e.qZA(),e.YNc(3,le,1,0,"mat-divider",28),e.BQk()),2&o){const t=r.$implicit,i=r.index,n=e.oxw(2);e.xp6(1),e.Q6J("value",t)("ngClass",n.outlineColorCoding(t)),e.xp6(1),e.hij(" ",null==t?null:t.title," "),e.xp6(1),e.Q6J("ngIf",0==i)}}function ce(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"button",48),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.deletePTEntry())}),e._uU(1,"Delete Entry"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("color","warn")("disabled",t.isSubmitting)}}function de(o,r){1&o&&(e.TgZ(0,"span",60),e._uU(1,"Next"),e.qZA())}function me(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-step",12)(1,"form",13),e.YNc(2,re,1,0,"ng-template",14),e.TgZ(3,"mat-form-field",64)(4,"mat-label"),e._uU(5,"Talk Date"),e.qZA(),e.TgZ(6,"input",65),e.NdJ("click",function(){e.CHM(t);const n=e.MAs(9);return e.KtG(n.open())}),e.qZA(),e._UZ(7,"mat-datepicker-toggle",66)(8,"mat-datepicker",67,68),e.TgZ(10,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.secondFormGroup.get("talkDate").setValue(null))}),e._UZ(11,"mat-icon",19),e.qZA(),e.TgZ(12,"mat-error"),e._uU(13," Talk date is required. "),e.qZA()(),e.TgZ(14,"mat-form-field",15)(15,"mat-label"),e._uU(16,"Congregation"),e.qZA(),e._UZ(17,"input",69),e.TgZ(18,"mat-autocomplete",70,71),e.NdJ("optionSelected",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.canSelectCongregation=!1)})("closed",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.congregationSelectionClosed())}),e.TgZ(20,"mat-option",72),e._uU(21,"N/A"),e.qZA(),e._UZ(22,"mat-divider"),e.YNc(23,ae,4,3,"ng-container",17),e.ALo(24,"async"),e.qZA(),e.TgZ(25,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.secondFormGroup.get("congregation").setValue(""),e.KtG(n.canSelectCongregation=!0)}),e._UZ(26,"mat-icon",19),e.qZA(),e.TgZ(27,"mat-error"),e._uU(28," Congregation is required. "),e.qZA()(),e.TgZ(29,"mat-form-field",64)(30,"mat-label"),e._uU(31,"Speaker Name"),e.qZA(),e._UZ(32,"input",73),e.TgZ(33,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.secondFormGroup.get("speakerName").setValue(null))}),e._UZ(34,"mat-icon",19),e.qZA(),e.TgZ(35,"mat-error"),e._uU(36," Speaker name is required. "),e.qZA()(),e.TgZ(37,"mat-form-field",15)(38,"mat-label"),e._uU(39,"Outline"),e.qZA(),e._UZ(40,"input",74),e.TgZ(41,"mat-autocomplete",70,75),e.NdJ("optionSelected",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.canSelectOutline=!1)})("closed",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.outlineSelectionClosed())}),e.YNc(43,ue,4,4,"ng-container",17),e.ALo(44,"async"),e.qZA(),e.TgZ(45,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return n.secondFormGroup.get("outlineNo").setValue(""),e.KtG(n.canSelectOutline=!0)}),e._UZ(46,"mat-icon",19),e.qZA(),e.TgZ(47,"mat-error"),e._uU(48," Outline is required. "),e.qZA()(),e.TgZ(49,"mat-form-field",15)(50,"mat-label"),e._uU(51,"PT Song No."),e.qZA(),e._UZ(52,"input",76),e.TgZ(53,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.secondFormGroup.get("songNo").setValue(""))}),e._UZ(54,"mat-icon",19),e.qZA(),e.TgZ(55,"mat-error"),e._uU(56," Song number is required. "),e.qZA()(),e.TgZ(57,"div",77)(58,"div",78),e.YNc(59,ce,2,2,"button",79),e.qZA(),e.TgZ(60,"div",25)(61,"button",47),e._uU(62,"Back"),e.qZA(),e.TgZ(63,"button",42)(64,"div"),e.YNc(65,de,2,0,"span",58),e.TgZ(66,"span",59),e._uU(67,"Next"),e.qZA()()()()()()()}if(2&o){const t=e.MAs(9),i=e.MAs(19),n=e.MAs(42),s=e.oxw();e.Q6J("stepControl",s.secondFormGroup)("completed",s.stepperStatus.publicTalkCompleted)("editable",s.overAllStepperStatus.editable),e.xp6(1),e.Q6J("formGroup",s.secondFormGroup),e.xp6(5),e.Q6J("max",s.maxTalkDate)("min",s.minTalkDate)("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:x-circle"),e.xp6(6),e.Q6J("readonly",!s.canSelectCongregation)("matAutocomplete",i),e.xp6(1),e.Q6J("displayWith",s.displayCongFn),e.xp6(5),e.Q6J("ngForOf",e.lcZ(24,27,s.filteredCongregations)),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:x-circle"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:x-circle"),e.xp6(6),e.Q6J("readonly",!s.canSelectOutline)("matAutocomplete",n),e.xp6(1),e.Q6J("displayWith",s.displayOutlineFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(44,29,s.filteredOutlines)),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:x-circle"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:x-circle"),e.xp6(5),e.Q6J("ngIf",s.isPTEdit),e.xp6(2),e.Q6J("color","warn")("disabled",s.isSubmitting),e.xp6(2),e.Q6J("color","primary")("disabled",!s.secondFormGroup.get("outlineNo").valid),e.xp6(2),e.Q6J("ngIf",s.secondFormGroup.get("outlineNo").valid)}}function pe(o,r){1&o&&e._uU(0,"Media Upload")}function ge(o,r){if(1&o&&(e.TgZ(0,"div")(1,"div",81)(2,"span",82),e._uU(3),e.qZA()()()),2&o){const t=e.oxw();e.xp6(3),e.hij("Files: ",t.selectedImages.length,"")}}const fe=function(o,r){return{"bg-green-400":o,"bg-red-400":r}};function he(o,r){if(1&o&&(e.TgZ(0,"div",83)(1,"div",84)(2,"span",85),e._uU(3),e.qZA()()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.WLB(3,fe,!t.totalFilesLimitReached,t.totalFilesLimitReached)),e.xp6(2),e.AsE("",t.totalFilesSizeString,"/",t.totalFilesLimit," MB")}}function _e(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",86)(2,"div",87),e._UZ(3,"img",88),e.qZA(),e.TgZ(4,"div",89)(5,"div",90)(6,"button",91),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.removeFile(s))}),e._UZ(7,"mat-icon",92),e.qZA()()()(),e.BQk()}if(2&o){const t=r.$implicit;e.xp6(3),e.Q6J("src",t.url,e.LSH),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:trash")}}function xe(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",93)(1,"div",26)(2,"span",94),e._uU(3,"Click this "),e.TgZ(4,"span",95),e.NdJ("click",function(){e.CHM(t),e.oxw();const n=e.MAs(46);return e.KtG(n.click())}),e._uU(5,"Add File(s)"),e.qZA(),e._uU(6," button to import your media."),e.qZA(),e.TgZ(7,"span",96),e._uU(8,"Please note: Maximum total size limit per upload is "),e.TgZ(9,"strong",97),e._uU(10),e.qZA(),e._uU(11,"."),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(10),e.hij("",t.totalFilesLimit," MB")}}function ve(o,r){1&o&&(e.TgZ(0,"div",98)(1,"span",99),e._uU(2,"You have reached the maximum allowed upload limit. Please remove some of the files to continue."),e.qZA()())}const be=function(o,r){return{"bg-blue-700 hover:bg-blue-500 hover:shadow-xl":o,"bg-gray-400 text-black":r}};function Ze(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",93)(1,"button",100),e.NdJ("click",function(){e.CHM(t),e.oxw();const n=e.MAs(46);return e.KtG(n.click())}),e.TgZ(2,"span",101),e._uU(3,"Add more file(s)"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.totalFilesLimitReached)("ngClass",e.WLB(2,be,!t.totalFilesLimitReached,t.totalFilesLimitReached))}}function Te(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"div",102)(1,"div",103),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.removeAllFiles(!0))}),e.TgZ(2,"span",104),e._uU(3,"Remove all files"),e.qZA()()()}}function ke(o,r){if(1&o&&(e.TgZ(0,"span",60),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Oqu(t.selectedImages.length<=0?"Skip":"Next")}}function Ce(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ke,2,1,"span",58),e.TgZ(2,"span",59),e._uU(3),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.submitFormGroup.invalid),e.xp6(2),e.Oqu(t.selectedImages.length<=0?"Skip":"Next")}}function Fe(o,r){1&o&&(e.TgZ(0,"span",60),e._uU(1,"Next"),e.qZA())}function we(o,r){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,Fe,2,0,"span",58),e.TgZ(2,"span",59),e._uU(3,"Next"),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.submitFormGroup.invalid&&"true"==t.isMidWeek&&(t.selectedImages.length>0||t.updatedFileProp.length>0))}}function Me(o,r){1&o&&e._uU(0,"Media Arrangement")}function Ie(o,r){if(1&o&&(e.TgZ(0,"span",113),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.AsE("You will be selecting the image for order number : ",t.currentOrder+1,"/",t.selectedImages.length,"")}}function Ne(o,r){1&o&&(e.TgZ(0,"span",113),e._uU(1,"You can modify the order of media by clicking the 'Clear Order' button below."),e.qZA())}function Se(o,r){if(1&o&&(e.TgZ(0,"div",116)(1,"div",20)(2,"span",117),e._uU(3),e.qZA()()()),2&o){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(t.order)}}const ye=function(o){return{"bg-black/[0.4]":o}};function Ae(o,r){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",86)(2,"div",87),e._UZ(3,"img",88),e.qZA(),e.TgZ(4,"div",114),e.NdJ("click",function(){const s=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.setFileOrder(s))}),e.YNc(5,Se,4,1,"div",115),e.qZA()(),e.BQk()}if(2&o){const t=r.$implicit;e.xp6(3),e.Q6J("src",t.url,e.LSH),e.xp6(1),e.Q6J("ngClass",e.VKq(3,ye,null!=t.order)),e.xp6(1),e.Q6J("ngIf",null!=t.order)}}function Ue(o,r){1&o&&(e.TgZ(0,"span",60),e._uU(1,"Next"),e.qZA())}function Ge(o,r){if(1&o){const t=e.EpF();e.TgZ(0,"mat-step",31),e.YNc(1,Me,1,0,"ng-template",14),e.TgZ(2,"div",105)(3,"div",106)(4,"span",107),e._uU(5,"Please click on the image tile base on the order of projection."),e.qZA(),e.YNc(6,Ie,2,2,"span",108),e.YNc(7,Ne,2,0,"span",108),e.TgZ(8,"div",20)(9,"button",109),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.removeOrdering())}),e.TgZ(10,"span",110),e._uU(11,"Clear Order"),e.qZA()()()(),e.TgZ(12,"div",111),e.YNc(13,Ae,6,5,"ng-container",17),e.qZA()(),e.TgZ(14,"div",40)(15,"button",41),e._uU(16,"Back"),e.qZA(),e.TgZ(17,"button",112),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.sortBy("order"))}),e.TgZ(18,"div"),e.YNc(19,Ue,2,0,"span",58),e.TgZ(20,"span",59),e._uU(21,"Next"),e.qZA()()()()()}if(2&o){const t=e.oxw();e.Q6J("stepControl",t.mediaArrangmentFormGroup)("completed",t.stepperStatus.mediaArrangementCompleted)("editable",t.overAllStepperStatus.editable),e.xp6(6),e.Q6J("ngIf",t.currentOrder!=t.selectedImages.length),e.xp6(1),e.Q6J("ngIf",t.currentOrder==t.selectedImages.length),e.xp6(2),e.Q6J("color","warn"),e.xp6(4),e.Q6J("ngForOf",t.selectedImages),e.xp6(2),e.Q6J("color","warn"),e.xp6(2),e.Q6J("color","primary")("disabled",t.currentOrder!=t.selectedImages.length),e.xp6(2),e.Q6J("ngIf",t.currentOrder==t.selectedImages.length)}}function Je(o,r){1&o&&e._uU(0,"Done")}function Qe(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",118),e._uU(2,"You are all set "),e.TgZ(3,"span",6),e._uU(4),e.qZA(),e._uU(5,"!"),e.qZA(),e.TgZ(6,"span",119),e._uU(7,"You can still review your upload before you submit by clicking the "),e.TgZ(8,"strong",120),e._uU(9,"Back"),e.qZA(),e._uU(10," button, or if you are sure about it, you can hit "),e.TgZ(11,"strong",121),e._uU(12,"Submit"),e.qZA(),e._uU(13,"."),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(null==t.userData?null:t.userData.nickname)}}function qe(o,r){1&o&&(e.TgZ(0,"span",127),e._uU(1,"We are now saving your files to our server."),e.qZA())}function Oe(o,r){if(1&o&&e._UZ(0,"mat-progress-bar",128),2&o){const t=e.oxw(2);e.Q6J("value",t.uploadProgress)("mode","determinate")}}function Pe(o,r){1&o&&e._UZ(0,"mat-progress-bar",129),2&o&&e.Q6J("mode","indeterminate")}function Ye(o,r){if(1&o&&(e.ynx(0),e.TgZ(1,"span",118),e._uU(2,"Hang on there "),e.TgZ(3,"span",6),e._uU(4),e.qZA(),e._uU(5,"."),e.qZA(),e.TgZ(6,"span",119),e._uU(7,"Please wait while we submit your media."),e.qZA(),e.TgZ(8,"span",122)(9,"span",123),e._uU(10,"DO NOT"),e.qZA(),e._uU(11," refresh or close this browser, or even switch to other app until we finish everything."),e.qZA(),e.YNc(12,qe,2,0,"span",124),e.YNc(13,Oe,1,2,"mat-progress-bar",125),e.YNc(14,Pe,1,1,"mat-progress-bar",126),e.BQk()),2&o){const t=e.oxw();e.xp6(4),e.Oqu(null==t.userData?null:t.userData.nickname),e.xp6(8),e.Q6J("ngIf",t.savinginProgress),e.xp6(1),e.Q6J("ngIf",!t.savinginProgress),e.xp6(1),e.Q6J("ngIf",t.savinginProgress)}}function De(o,r){1&o&&(e.TgZ(0,"div")(1,"span",60),e._uU(2,"Submit"),e.qZA(),e.TgZ(3,"span",59),e._uU(4,"Submit"),e.qZA()())}function je(o,r){1&o&&e._UZ(0,"mat-progress-spinner",63),2&o&&e.Q6J("diameter",24)("mode","indeterminate")}const Ve=function(o){return{"disabled:bg-transparent disabled:text-white":o}};let We=(()=>{class o{constructor(t,i,n,s){this._activatedRoute=t,this._matDialog=i,this._meetingService=n,this._formBuilder=s,this.alert={type:"success",message:""},this.showAlert=!1,this.isLinear=!1,this.isSubmitting=!1,this.showStepper=!0,this.isPTEdit=!1,this.isPTDeleted=!1,this.stepperStatus={meetingInfoCompleted:!1,meetingInfoEditable:!1,publicTalkCompleted:!1,publicTalkEditable:!1,mediaUploadCompleted:!1,mediaUploadEditable:!1,mediaArrangementCompleted:!1,mediaArrangementEditable:!1},this.overAllStepperStatus={editable:!0,completed:!0},this.selectedImages=[],this.currentOrder=0,this.weekSelection=[],this.outlineSelection=[],this.canSelectOutline=!0,this.congregationSelection=[],this.canSelectCongregation=!0,this.isMidWeek="",this.isMediaChecking=!1,this.isThumbnailLoading=!1,this.updatedFileProp=[],this.uploadProgress=0,this.savinginProgress=!1,this.totalFilesSize=0,this.totalFilesSizeString="0B",this.totalFilesLimit=100,this.totalFilesLimitReached=!1,this.meetingCheckString="Checking meeting information..."}ngOnInit(){this._activatedRoute.data.subscribe(t=>{this.userData=t?.UserData?.userInfo}),this.firstFormGroup=this._formBuilder.group({weekNumber:[null,u.kI.compose([u.kI.required])],isMidweek:[null,u.kI.compose([u.kI.required])],valid:[null,u.kI.compose([u.kI.required])]}),this.secondFormGroup=this._formBuilder.group({talkDate:["",u.kI.compose([u.kI.required])],outlineNo:[null,u.kI.compose([u.kI.required])],congregation:[null],speakerName:[null,u.kI.compose([u.kI.required])],songNo:["",u.kI.compose([u.kI.required,u.kI.min(1)])]}),this.mediaArrangmentFormGroup=this._formBuilder.group({valid:[null,u.kI.compose([u.kI.required])]}),this.submitFormGroup=this._formBuilder.group({valid:["true",u.kI.compose([u.kI.required])]}),this.filteredOutlines=this.secondFormGroup.get("outlineNo").valueChanges.pipe((0,y.O)(""),(0,F.U)(t=>{const i="string"==typeof t?t:t?.title;return i?this._filterOutlines(i):this.outlineSelection.slice()})),this.filteredCongregations=this.secondFormGroup.get("congregation").valueChanges.pipe((0,y.O)(""),(0,F.U)(t=>{const i="string"==typeof t?t:t?.name;return i?this._filterCongregations(i):this.congregationSelection.slice()}))}passwordChange(){var t=this.secondFormGroup.get("password").value,i=this.secondFormGroup.get("confirmPassword").value;this.secondFormGroup.controls.confirmPassword.setErrors(t!=i?{invalid:!0}:null)}meetingWeekChanged(){this.firstFormGroup.get("valid").setValue(null)}submitSetup(){this.showAlert=!1,this.isSubmitting=!0,this.firstFormGroup.disable(),this.secondFormGroup.disable(),this.mediaArrangmentFormGroup.disable(),this.submitFormGroup.disable();let t=this.selectedImages.filter(l=>null!=l.name).map(l=>({filename:l.name,orderNo:l.order,remarks:null,isNew:!0}));const i=new FormData;this.selectedImages.forEach(l=>{i.append("files",l.file)});const n=this.weekSelection.find(l=>l.weekNum==this.firstFormGroup.get("weekNumber").value).yearNumber;if(i.append("weekNumber",this.firstFormGroup.get("weekNumber").value),i.append("yearNumber",n),t.length>0&&i.append("fileProperties",JSON.stringify(t)),this.updatedFileProp.length>0&&i.append("updateFileProperties",JSON.stringify(this.updatedFileProp)),i.append("isMidWeek",this.isMidWeek),"true"!==this.isMidWeek){if(this.secondFormGroup.get("talkDate").value){const l=m().utc(this.secondFormGroup.get("talkDate").value).toString();i.append("talkDate",l)}this.secondFormGroup.get("congregation").value&&i.append("congregation",this.secondFormGroup.get("congregation").value?.congId),this.secondFormGroup.get("speakerName").value&&i.append("speakerName",this.secondFormGroup.get("speakerName").value),this.secondFormGroup.get("outlineNo").value&&i.append("outlineNo",this.secondFormGroup.get("outlineNo").value?.outlineNo),this.secondFormGroup.get("songNo").value&&i.append("songNo",this.secondFormGroup.get("songNo").value)}this.uploadProgress=0,this.savinginProgress=!1,this.overAllStepperStatus.completed=!0,this.overAllStepperStatus.editable=!1;let s=!1;this._meetingService.Upload(i).pipe((0,W.x)(()=>{this.uploadProgress=0,this.savinginProgress=!1,this.isSubmitting=!1,this.showStepper=s})).subscribe(l=>{if(l.type==h.dt.UploadProgress){const d=Math.round(l.loaded/l.total*100);this.uploadProgress=d,d>=100&&(this.savinginProgress=!0)}},l=>{s=!0,this.alert={type:"error",message:l.error.data},this.showAlert=!0,this.isSubmitting=!1,this.overAllStepperStatus.completed=!0,this.overAllStepperStatus.editable=!0})}checkMeetingData(){var t=this;return C(function*(){if(t.meetingCheckString="Checking meeting information...",t.totalFilesSize>0)return t.firstFormGroup.get("valid").setValue(!0),void t._meetingStepper.next();"true"==t.isMidWeek&&t.submitFormGroup.get("valid").setValue(null),t.removeAllFiles();const i=t.weekSelection.find(s=>s.weekNum==t.firstFormGroup.get("weekNumber").value);"true"!==t.isMidWeek&&(t.minTalkDate=m()(m()(i.weekStart).startOf("day")).local().startOf("day"),t.maxTalkDate=m()(m()(i.weekEnd).startOf("day")).local().startOf("day"));let n=[{field:"yearNumber",value:i.yearNumber},{field:"weekNumber",value:t.firstFormGroup.get("weekNumber").value},{field:"isMidWeek",value:t.isMidWeek}];t.isMediaChecking=!0,t._meetingService.GetMedia(n).subscribe(function(){var s=C(function*(c){t.showAlert=!1;const l=c.publicTalk,d=c.medias||[];t.isPTEdit=!!l,t.canSelectOutline=!t.isPTEdit,t.canSelectCongregation=!t.isPTEdit,t.secondFormGroup.get("congregation").setValue(t.congregationSelection.find(p=>p?.congId==l?.Depot?._id)),t.secondFormGroup.get("speakerName").setValue(l?.speakerName),t.secondFormGroup.get("outlineNo").setValue(t.outlineSelection.find(p=>p?.outlineNo==l?.outlineNo)),t.secondFormGroup.get("songNo").setValue(l?.songNo),t.secondFormGroup.get("talkDate").setValue(l?.talkDate?m()(l?.talkDate).local():null),d.length>0?(t.isThumbnailLoading=!0,t.meetingCheckString="Fetching meeting media...",yield new Promise(function(){var p=C(function*(D,rt){for(let I of d){const st=yield L(t._meetingService.GetThumbnail(I.thumbnailUrl)),at=yield t.createImageFromBlob(st);t.selectedImages.push({name:null,url:at,order:I.orderNo,fileId:I._id})}D()});return function(D,rt){return p.apply(this,arguments)}}()),t.isThumbnailLoading=!1,t.mediaArrangmentFormGroup.get("valid").setValue("true"),t.submitFormGroup.get("valid").setValue("true")):t.submitFormGroup.get("valid").setValue("true"!=t.isMidWeek||null),t.sortBy("order"),t.currentOrder=d.length,t.isMediaChecking=!1,t.firstFormGroup.get("valid").setValue(!0),t._meetingStepper.next()});return function(c){return s.apply(this,arguments)}}(),s=>{t.isMediaChecking=!1,t.firstFormGroup.get("valid").setValue(!0),t._meetingStepper.next()})})()}deletePTEntry(){this._matDialog.open(j.$,{maxWidth:"400px",data:{title:"Cancel",message:"Are you sure you want to delete this entry?"}}).afterClosed().subscribe(i=>{1==i&&(this.secondFormGroup.reset(),this.removeAllFiles(!0),this.submitSetup())})}onImageSelected(t){isNaN(this.totalFilesSize)&&(this.totalFilesSize=0);for(const n of t.target.files){var i=new FileReader;this.totalFilesSize+=n.size,i.readAsDataURL(n),i.onload=s=>{this.currentOrder+=1,this.selectedImages.push({name:n.name,file:n,url:s.target.result,order:this.currentOrder,size:n.size})}}this.mediaArrangmentFormGroup.get("valid").setValue("true"),t.target.value=null,this.calculateFileSize()}calculateFileSize(){isNaN(this.totalFilesSize)&&(this.totalFilesSize=0);let t="KB",i=0,n=this.totalFilesSize/1024;n/1024>1?(i=n/1024,this.totalFilesLimitReached=i>this.totalFilesLimit,this.totalFilesLimitReached?this.submitFormGroup.get("valid").setValue(null):this.submitFormGroup.get("valid").setValue(!0),t="MB"):(this.submitFormGroup.get("valid").setValue(!0),this.totalFilesLimitReached=!1,i=n,t="KB"),this.totalFilesSizeString=`${(i||0).toFixed(2)} ${t}`}setFileOrder(t){if(null!=t){if(null==t.order){if(this.currentOrder+=1,t.order=this.currentOrder,t.fileId){const i=this.updatedFileProp.findIndex(n=>n.filename==t.fileId);i>=0&&this.updatedFileProp.splice(i,1),this.updatedFileProp.push({filename:t.fileId,orderNo:t.order,isNew:!1,remarks:t.remarks})}}else t.order==this.currentOrder&&(this.currentOrder-=1,t.order=null);this.sortBy("order"),this.currentOrder==this.selectedImages.length?this.mediaArrangmentFormGroup.get("valid").setValue("true"):this.mediaArrangmentFormGroup.get("valid").setValue(null)}}removeFile(t){if(t.fileId){const i=this.updatedFileProp.findIndex(n=>n.filename==t.fileId);i>=0&&this.updatedFileProp.splice(i,1),this.updatedFileProp.push({filename:t.fileId,isDeleted:!0})}else this.totalFilesSize-=t.size;this.selectedImages.splice(this.selectedImages.indexOf(t),1),this.removeOrdering(),this.calculateFileSize(),"true"==this.isMidWeek&&this.selectedImages.length<=0&&this.updatedFileProp.length<=0&&this.submitFormGroup.get("valid").setValue(null)}removeAllFiles(t=!1){t&&this.selectedImages.forEach(i=>{if(i.fileId){const n=this.updatedFileProp.findIndex(s=>s.filename==i.fileId);n>=0&&this.updatedFileProp.splice(n,1),this.updatedFileProp.push({filename:i.fileId,isDeleted:!0})}this.totalFilesSize-=i.size}),this.selectedImages.splice(0,this.selectedImages.length),this.currentOrder=0,this.totalFilesSize=0,this.calculateFileSize(),"true"==this.isMidWeek&&this.selectedImages.length<=0&&this.updatedFileProp.length<=0&&this.submitFormGroup.get("valid").setValue(null)}removeOrdering(){this.currentOrder=0,this.selectedImages.forEach(t=>{t.order=null})}sortBy(t){return this.selectedImages.sort((i,n)=>(null!=i[t]?i[t]:1/0)-(null!=n[t]?n[t]:1/0))}GetWeeks(){var t;let i=[];for(t=-1;t<3;t++){const n=m()().add(t,"week").startOf("isoWeek"),s=m()().add(t,"week").endOf("isoWeek"),c=n.format("MM")==s.format("MM"),l=`${n.format("MMM DD")} - ${s.format(c?"DD, YYYY":"MMM DD, YYYY")}`,d=m()().add(t,"week").startOf("isoWeek").week();i.push({weekName:l,weekNum:d,weekStart:n,weekEnd:s})}return i}backToForms(){this.removeAllFiles(),this.selectedImages=[],this.updatedFileProp=[],this.firstFormGroup.reset(),this.secondFormGroup.reset(),this.mediaArrangmentFormGroup.reset(),this.submitFormGroup.reset(),this.firstFormGroup.enable(),this.secondFormGroup.enable(),this.mediaArrangmentFormGroup.enable(),this.submitFormGroup.enable(),this.overAllStepperStatus.completed=!1,this.overAllStepperStatus.editable=!0,this._meetingStepper.reset(),this.showStepper=!0}createImageFromBlob(t){return new Promise((i,n)=>{let s=new FileReader;s.addEventListener("load",()=>{i(s.result)},!1),t&&s.readAsDataURL(t)})}_filterOutlines(t){const i=t.toLowerCase();return this.outlineSelection.filter(n=>n?.title.toLowerCase().includes(i))}_filterCongregations(t){const i=t.toLowerCase();return this.congregationSelection.filter(n=>n?.name.toLowerCase().includes(i))}displayOutlineFn(t){return t?.title}displayCongFn(t){return t?.name}outlineSelectionClosed(){(this.secondFormGroup.get("outlineNo").value.outlineNo??-1)<0&&this.secondFormGroup.get("outlineNo").setErrors({error:!0})}congregationSelectionClosed(){const t=this.secondFormGroup.get("congregation").value?.congId??this.secondFormGroup.get("congregation").value,i=this.secondFormGroup.get("congregation").value;!t&&i&&this.secondFormGroup.get("congregation").setErrors({error:!0})}outlineColorCoding(t){if(t.lastUsed&&this.secondFormGroup.get("talkDate").value){if(m()(this.secondFormGroup.get("talkDate").value)>=m()(t?.lastUsed))return{"bg-red-200":!0};if(m()(this.secondFormGroup.get("talkDate").value)<=m()(t?.lastUsed))return{"bg-green-200":!0}}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(k.gz),e.Y36(A.on),e.Y36(B),e.Y36(u.QS))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-media"]],viewQuery:function(t,i){if(1&t&&e.Gf(R,5),2&t){let n;e.iGM(n=e.CRH())&&(i._meetingStepper=n.first)}},decls:75,vars:47,consts:[[1,"flex","flex-col","items-center","justify-center","flex-auto","p-4"],[1,"flex","items-center","justify-end","w-full","sm:w-auto","p-2","rounded-2xl","shadow-lg","sm:bg-card","max-w-[1000px]"],[1,"w-full","p-2","sm:mx-0"],["class","w-full h-150 max-h-150 flex flex-col items-center justify-center p-6",4,"ngIf"],[1,"w-full","h-150","max-h-150",3,"hidden"],[1,"flex","flex-row","flex-auto","space-x-1","items-center","justify-center","mt-2","mb-4","text-2xl","font-semibold","tracking-tight","leading-tight"],[1,"font-extrabold"],[1,"flex","flex-col","items-center","justify-center","mt-2","font-medium"],[1,"text-center"],["class","mt-2 mb-2",3,"appearance","showIcon","type",4,"ngIf"],["orientation","vertical",1,"w-full","bg-transparent",3,"linear"],["meetingStepper",""],[3,"stepControl","completed","editable"],[3,"formGroup"],["matStepLabel",""],["appearance","fill",1,"w-full","mt-4"],["matInput","","placeholder","Week number","formControlName","weekNumber","required","",3,"valueChange"],[4,"ngFor","ngForOf"],["mat-icon-button","","type","button","matSuffix","",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","flex-row","justify-center"],["required","","formControlName","isMidweek",3,"ngModel","ngModelChange","change"],["value","true",1,"mr-6"],["value","false",1,"mr-6"],[1,"mt-4","flex","flex-col","justify-center"],[1,"flex","flex-row","items-end","justify-end"],[1,"flex","flex-col","justify-center"],["mat-flat-button","",3,"ngClass","color","disabled","click"],[4,"ngIf"],["class","flex flex-col justify-center",4,"ngIf"],[3,"stepControl","completed","editable",4,"ngIf"],[1,"h-full",3,"stepControl","completed","editable"],["hidden","","multiple","","type","file","accept","image/*",3,"change"],["selectFile",""],[1,"flex","flex","justify-between"],["class","relative",4,"ngIf"],[1,"mt-2","grid","md:grid-cols-4","md:gap-4","gap-3","grid-cols-3"],["class","mt-4 flex flex-row justify-center",4,"ngIf"],["class","mt-8 flex flex-row justify-center",4,"ngIf"],["class","mt-2 flex flex-row justify-center",4,"ngIf"],[1,"mt-6","flex","flex-row","items-end","justify-end"],["mat-button","","matStepperPrevious","",3,"color"],["mat-flat-button","","matStepperNext","",3,"color","disabled"],["class","h-full",3,"stepControl","completed","editable",4,"ngIf"],[1,"w-full",3,"stepControl"],[1,"relative","flex","flex-col","left-0","z-49","mt-2"],[1,"flex","flex-row","items-end","justify-end","mt-4"],["mat-button","","matStepperPrevious","",3,"color","disabled"],["mat-flat-button","",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"w-full","h-150","max-h-150","flex","flex-col","items-center","justify-center","p-6"],[1,"flex","flex-row","flex-auto","space-x-1","items-center","justify-center","mt-6","font-semibold","tracking-tight","leading-tight"],[1,"text-[16px]"],[1,"text-[12px]","font-semibold","mt-4","text-center"],[1,"icon-size-16","text-green-500","mt-2",3,"svgIcon"],[1,"text-md","font-semibold","mt-4","text-center","text-blue-600","cursor-pointer",3,"click"],[1,"mt-2","mb-2",3,"appearance","showIcon","type"],[3,"value"],["class","absolute inline-flex animate-ping text-white",4,"ngIf"],[1,"relative","inline-flex","text-white"],[1,"absolute","inline-flex","animate-ping","text-white"],[1,"flex","flex-row","space-x-[5px]"],[1,"text-sm","mt-[5px]"],[3,"diameter","mode"],["appearance","fill",1,"w-full","mt-2"],["matInput","","autocomplete","off","autocomplete","disabled","placeholder","Talk Date","formControlName","talkDate",3,"max","min","matDatepicker","click"],["matSuffix","",3,"for"],["startView","month"],["talkDatePicker",""],["matInput","","placeholder","Select congregation from the list","formControlName","congregation",3,"readonly","matAutocomplete"],["autoActiveFirstOption","",3,"displayWith","optionSelected","closed"],["auto","matAutocomplete"],[1,"text-gray-400"],["required","","matInput","","placeholder","Speaker Name","formControlName","speakerName","required",""],["required","","matInput","","placeholder","Select outline from the list","formControlName","outlineNo","required","",3,"readonly","matAutocomplete"],["outlineAutocomplete","matAutocomplete"],["required","","matInput","","placeholder","Song number","type","number","pattern","[0-9]*","inputmode","numeric","formControlName","songNo","required",""],[1,"flex","justify-between"],[1,"flex","flex-row","items-start","justify-start"],["mat-flat-button","",3,"color","disabled","click",4,"ngIf"],[3,"value","ngClass"],[1,"rounded-lg","p-2","bg-cyan-500"],[1,"text-[14px]","font-semibold","text-white"],[1,"relative"],[1,"rounded-lg","p-2",3,"ngClass"],[1,"text-[14px]","font-bold","text-white"],[1,"flex","flex-col","justify-center","bg-black","relative","border-2","border-cyan-500"],[1,""],[1,"",3,"src"],[1,"absolute","top-0","right-0","w-full","h-full"],[1,"flex","justify-between","bg-black/[0.6]"],[3,"click"],[1,"md:icon-size-6","icon-size-5","text-red-600",3,"svgIcon"],[1,"mt-4","flex","flex-row","justify-center"],[1,"text-[12px]","font-semibold","text-gray-600"],[1,"bg-blue-700","hover:bg-blue-500","hover:shadow-xl","shadow-lg","text-white","rounded-lg","p-2","cursor-pointer",3,"click"],[1,"mt-[8px]","text-[10px]","font-semibold","text-gray-600"],[1,"text-red-400"],[1,"mt-8","flex","flex-row","justify-center"],[1,"text-[12px]","font-semibold","text-red-600"],[1,"flex","flex-col","justify-center","w-[150px]","h-[30px]","rounded-xl","shadow-lg","cursor-pointer",3,"disabled","ngClass","click"],[1,"text-white","text-md","text-center","w-full"],[1,"mt-2","flex","flex-row","justify-center"],[1,"flex","flex-col","justify-center","w-[150px]","h-[30px]","hover:bg-red-500","rounded-xl","bg-red-700","shadow-lg","hover:shadow-xl","cursor-pointer",3,"click"],[1,"text-white","text-md","text-center"],[1,"flex","flex-col","space-y-[10px]"],[1,"flex","flex-col","justify-center","w-full"],[1,"text-[14px]","font-semibold","text-center"],["class","text-[12px] font-medium text-center",4,"ngIf"],["mat-button","",1,"w-[100px]",3,"color","click"],[1,"text-red"],[1,"grid","md:grid-cols-4","md:gap-4","gap-3","grid-cols-3"],["mat-flat-button","","matStepperNext","",3,"color","disabled","click"],[1,"text-[12px]","font-medium","text-center"],[1,"absolute","top-0","right-0","w-full","h-full","hover:bg-black/[0.3]","cursor-pointer",3,"ngClass","click"],["class","flex flex-col justify-center w-full h-full",4,"ngIf"],[1,"flex","flex-col","justify-center","w-full","h-full"],[1,"md:w-10","md:h-10","md:text-4xl","text-xl","w-5","h-5","font-semibold","text-center","text-white"],[1,"text-start","font-semibold","text-lg"],[1,"text-start","font-medium","text-md","mt-2","break-words","whitespace-pre-line"],[1,"text-red-400","text-md"],[1,"text-blue-400","text-md"],[1,"text-start","font-medium","text-md","mt-4","break-words","whitespace-pre-line","text-red-600"],[1,"p-[5px]","text-white","bg-red-500","font-semibold"],["class","mt-2 text-start font-medium text-md break-words whitespace-pre-line text-green-500",4,"ngIf"],["class","mt-2 w-full h-[10px]",3,"value","mode",4,"ngIf"],["class","mt-2 w-full h-[10px]",3,"mode",4,"ngIf"],[1,"mt-2","text-start","font-medium","text-md","break-words","whitespace-pre-line","text-green-500"],[1,"mt-2","w-full","h-[10px]",3,"value","mode"],[1,"mt-2","w-full","h-[10px]",3,"mode"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,$,12,2,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"span"),e._uU(7,"Greetings "),e.TgZ(8,"span",6),e._uU(9),e.qZA(),e._uU(10,"!"),e.qZA()(),e.TgZ(11,"div",7)(12,"div",8),e._uU(13,"Please fill the following meeting information."),e.qZA()(),e.YNc(14,X,2,5,"fuse-alert",9),e.TgZ(15,"mat-stepper",10,11)(17,"mat-step",12)(18,"form",13),e.YNc(19,ee,1,0,"ng-template",14),e.TgZ(20,"mat-form-field",15)(21,"mat-label"),e._uU(22,"Meeting Week"),e.qZA(),e.TgZ(23,"mat-select",16),e.NdJ("valueChange",function(){return i.meetingWeekChanged()}),e.YNc(24,te,3,2,"ng-container",17),e.qZA(),e.TgZ(25,"button",18),e.NdJ("click",function(){return i.firstFormGroup.get("weekNumber").setValue("")}),e._UZ(26,"mat-icon",19),e.qZA(),e.TgZ(27,"mat-error"),e._uU(28," Meeting week is required. "),e.qZA()(),e.TgZ(29,"div",20)(30,"mat-radio-group",21),e.NdJ("ngModelChange",function(s){return i.isMidWeek=s})("change",function(){return i.meetingWeekChanged()}),e.TgZ(31,"mat-radio-button",22),e._uU(32,"Midweek"),e.qZA(),e.TgZ(33,"mat-radio-button",23),e._uU(34,"Weekend"),e.qZA()()(),e.TgZ(35,"div",24)(36,"div",25),e._UZ(37,"div",26),e.TgZ(38,"button",27),e.NdJ("click",function(){return i.checkMeetingData()}),e.YNc(39,oe,4,1,"div",28),e.YNc(40,ne,5,3,"div",29),e.qZA()()()()(),e.YNc(41,me,68,31,"mat-step",30),e.TgZ(42,"mat-step",31),e.YNc(43,pe,1,0,"ng-template",14),e.TgZ(44,"div",26)(45,"input",32,33),e.NdJ("change",function(s){return i.onImageSelected(s)}),e.qZA(),e.TgZ(47,"div",24)(48,"div",34),e.YNc(49,ge,4,1,"div",28),e.YNc(50,he,4,6,"div",35),e.qZA()(),e.TgZ(51,"div",36),e.YNc(52,_e,8,2,"ng-container",17),e.qZA(),e.YNc(53,xe,12,1,"div",37),e.YNc(54,ve,3,0,"div",38),e.YNc(55,Ze,4,5,"div",37),e.YNc(56,Te,4,0,"div",39),e.qZA(),e.TgZ(57,"div",40)(58,"button",41),e._uU(59,"Back"),e.qZA(),e.TgZ(60,"button",42),e.YNc(61,Ce,4,2,"div",28),e.YNc(62,we,4,1,"div",28),e.qZA()()(),e.YNc(63,Ge,22,11,"mat-step",43),e.TgZ(64,"mat-step",44),e.YNc(65,Je,1,0,"ng-template",14),e.TgZ(66,"div",45),e.YNc(67,Qe,14,1,"ng-container",28),e.YNc(68,Ye,15,4,"ng-container",28),e.qZA(),e.TgZ(69,"div",46)(70,"button",47),e._uU(71,"Back"),e.qZA(),e.TgZ(72,"button",48),e.NdJ("click",function(){return i.submitSetup()}),e.YNc(73,De,5,0,"div",28),e.YNc(74,je,1,2,"mat-progress-spinner",49),e.qZA()()()()()()()()),2&t&&(e.xp6(3),e.Q6J("ngIf",!i.showStepper),e.xp6(1),e.Q6J("hidden",!i.showStepper),e.xp6(5),e.Oqu(null==i.userData?null:i.userData.nickname),e.xp6(5),e.Q6J("ngIf",i.showAlert),e.xp6(1),e.Q6J("linear",!0),e.xp6(2),e.Q6J("stepControl",i.firstFormGroup)("completed",i.stepperStatus.meetingInfoCompleted)("editable",i.overAllStepperStatus.editable),e.xp6(1),e.Q6J("formGroup",i.firstFormGroup),e.xp6(6),e.Q6J("ngForOf",i.weekSelection),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:x-circle"),e.xp6(4),e.Q6J("ngModel",i.isMidWeek),e.xp6(8),e.Q6J("ngClass",e.VKq(45,Ve,i.isMediaChecking))("color","primary")("disabled",""==(i.firstFormGroup.get("weekNumber").value||"")||""==(i.firstFormGroup.get("isMidweek").value||"")||i.isMediaChecking),e.xp6(1),e.Q6J("ngIf",!i.isMediaChecking),e.xp6(1),e.Q6J("ngIf",i.isMediaChecking),e.xp6(1),e.Q6J("ngIf","false"==i.firstFormGroup.get("isMidweek").value),e.xp6(1),e.Q6J("stepControl",i.submitFormGroup)("completed",i.stepperStatus.mediaUploadCompleted)("editable",i.overAllStepperStatus.editable),e.xp6(7),e.Q6J("ngIf",i.selectedImages.length>0),e.xp6(1),e.Q6J("ngIf",i.totalFilesSize>0),e.xp6(2),e.Q6J("ngForOf",i.selectedImages),e.xp6(1),e.Q6J("ngIf",!i.isThumbnailLoading&&i.selectedImages.length<=0),e.xp6(1),e.Q6J("ngIf",i.totalFilesLimitReached),e.xp6(1),e.Q6J("ngIf",i.selectedImages.length>0),e.xp6(1),e.Q6J("ngIf",i.selectedImages.length>0),e.xp6(2),e.Q6J("color","warn"),e.xp6(2),e.Q6J("color","primary")("disabled",i.isSubmitting)("disabled",i.submitFormGroup.invalid||"true"==i.isMidWeek&&i.selectedImages.length<=0&&i.updatedFileProp.length<=0),e.xp6(1),e.Q6J("ngIf","false"==i.isMidWeek),e.xp6(1),e.Q6J("ngIf","true"==i.isMidWeek),e.xp6(1),e.Q6J("ngIf",i.selectedImages.length>0),e.xp6(1),e.Q6J("stepControl",i.submitFormGroup),e.xp6(3),e.Q6J("ngIf",!i.isSubmitting),e.xp6(1),e.Q6J("ngIf",i.isSubmitting),e.xp6(2),e.Q6J("color","warn")("disabled",i.isSubmitting),e.xp6(2),e.Q6J("color","primary")("disabled",i.isSubmitting)("disabled",i.submitFormGroup.invalid),e.xp6(1),e.Q6J("ngIf",!i.isSubmitting),e.xp6(1),e.Q6J("ngIf",i.isSubmitting))},dependencies:[f.mk,f.sg,f.O5,G.eB,J.d,Q.Hw,q.eI,u._Y,u.Fj,u.wV,u.JJ,u.JL,u.Q7,u.c5,u.sg,u.u,_.nI,_.v_,_.$V,_.nX,O.k0,w.VN,w.QJ,H.CK,P.sN,K.W,g.C0,g.VY,g.Vq,g.Ic,g.fd,T.Mq,T.hl,T.nW,Y.x8,M.OY,M.vy,f.Ov]}),o})();var ze=a(9315),Ee=a(4855);const Le=[{path:"",data:{layout:"empty"},children:[{path:"media",data:{layout:"centered"},resolve:{UserData:(()=>{class o{constructor(t,i){this._httpClient=t,this._authService=i,this.apiHost=U.N.apiHost}resolve(t,i){return(0,ze.D)([this._authService.handShake()]).pipe((0,F.U)(([n])=>({userInfo:n})))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h.eN),e.LFG(Ee.e))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},component:We}]}];let Be=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[k.Bz.forChild(Le),k.Bz]}),o})();var He=a(3445),Ke=a(9488),Re=a(9119),$e=a(3176),Xe=a(8250),et=a(1830),tt=a(1865),it=a(5170),ot=a(6208);let nt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.ez,Be,G.yu,Ke.vV,J.t,Q.Ps,Xe.jT,q.jc,ot.m,_.wp,A.yj,O.x4,et.Wd,Re.yD,w.D8,P.UK,tt.y,it.fC,g.T5,T.FA,He.Yd,Y.uw,M.Xo,$e.N6]}),o})()}}]);