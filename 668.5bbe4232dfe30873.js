"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[668],{2668:(k,f,i)=>{i.r(f),i.d(f,{AuthSignInModule:()=>B});var d=i(8184),p=i(4505),A=i(4021),m=i(4187),h=i(2400),I=i(1438),g=i(617),T=i(7295),Z=i(5170),b=i(6208),r=i(6223),y=i(4748),u=i(9347),t=i(5879),v=i(6814),x=i(7466);function S(n,a){1&n&&(t.TgZ(0,"mat-radio-button",11),t._uU(1," Authenticator App "),t.qZA())}function w(n,a){if(1&n&&(t.TgZ(0,"mat-radio-button",12),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" Email ",null==e.data?null:e.data.maskedEmail," ")}}function C(n,a){if(1&n&&(t.TgZ(0,"mat-radio-button",13),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij(" Send SMS to ",null==e.data?null:e.data.maskedMobile," ")}}let _=(()=>{class n{constructor(e,o){this.dialogRef=e,this.data=o}ngOnInit(){}submitOtp(){this.dialogRef.close(this.selectedTFA)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.so),t.Y36(u.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-two-factor-selection"]],decls:16,vars:7,consts:[[1,"flex","flex-0","items-center","justify-between","h-16","pr-3","sm:pr-5","pl-6","sm:pl-8","bg-gray-600","text-on-primary"],[1,"text-lg"],["mat-dialog-close","","mat-icon-button","",3,"tabIndex"],[1,"text-current",3,"svgIcon"],[1,"p-0"],[1,"flex","flex-col","flex-auto","sm:p-8","overflow-y-auto"],[1,"flex","flex-col","mt-2",3,"ngModel","ngModelChange"],["value","auth",4,"ngIf"],["value","email",4,"ngIf"],["value","mobileNumber",4,"ngIf"],["type","button","mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-6","bg-blue-700","text-white",3,"color","click"],["value","auth"],["value","email"],["value","mobileNumber"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._uU(2,"Two-Factor Authentication"),t.qZA(),t.TgZ(3,"button",2),t._UZ(4,"mat-icon",3),t.qZA()(),t.TgZ(5,"mat-dialog-content",4)(6,"div",5)(7,"span"),t._uU(8,"Please select a two factor authentication option below:"),t.qZA(),t.TgZ(9,"mat-radio-group",6),t.NdJ("ngModelChange",function(l){return o.selectedTFA=l}),t.YNc(10,S,2,0,"mat-radio-button",7),t.YNc(11,w,2,1,"mat-radio-button",8),t.YNc(12,C,2,1,"mat-radio-button",9),t.qZA(),t.TgZ(13,"button",10),t.NdJ("click",function(){return o.submitOtp()}),t.TgZ(14,"span"),t._uU(15," Send OTP "),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("tabIndex",-1),t.xp6(1),t.Q6J("svgIcon","heroicons_outline:x"),t.xp6(5),t.Q6J("ngModel",o.selectedTFA),t.xp6(1),t.Q6J("ngIf",1==(null==o.data?null:o.data.tfaOptions.includes("tfa"))),t.xp6(1),t.Q6J("ngIf",1==(null==o.data?null:o.data.tfaOptions.includes("email"))),t.xp6(1),t.Q6J("ngIf",1==(null==o.data?null:o.data.tfaOptions.includes("mobileNumber"))),t.xp6(1),t.Q6J("color","primary"))},dependencies:[v.O5,p.eB,g.Hw,r.JJ,r.On,u.ZT,u.xY,x.VQ,x.U0]}),n})();var F=i(4855),J=i(9925);const U=["signInNgForm"];function N(n,a){if(1&n&&(t.TgZ(0,"fuse-alert",23),t._uU(1),t.qZA()),2&n){const e=t.oxw();t.Q6J("appearance","outline")("showIcon",!1)("type",e.alert.type)("@shake","error"===e.alert.type),t.xp6(1),t.hij(" ",e.alert.message," ")}}function Q(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," Username is required "),t.qZA())}function M(n,a){1&n&&t._UZ(0,"mat-icon",24),2&n&&t.Q6J("svgIcon","heroicons_solid:eye")}function Y(n,a){1&n&&t._UZ(0,"mat-icon",24),2&n&&t.Q6J("svgIcon","heroicons_solid:eye-off")}function O(n,a){1&n&&(t.TgZ(0,"span"),t._uU(1," Sign in "),t.qZA())}function j(n,a){1&n&&t._UZ(0,"mat-progress-spinner",25),2&n&&t.Q6J("diameter",24)("mode","indeterminate")}const P=function(){return["/forgot-password"]},q=[{path:"",component:(()=>{class n{constructor(e,o,s,l,c){this._activatedRoute=e,this._matDialog=o,this._authService=s,this._formBuilder=l,this._router=c,this.alert={type:"success",message:""},this.showAlert=!1}ngOnInit(){this.signInForm=this._formBuilder.group({Username:["",[r.kI.required]],Password:["",r.kI.required],SendChannel:[""]})}signIn(){this.signInForm.invalid||(this.signInForm.disable(),this.showAlert=!1,this._authService.signIn(this.signInForm.value).subscribe(e=>{this._matDialog.open(_,{data:e}).afterClosed().subscribe(s=>{"email"==s||"mobileNumber"==s?(this.signInForm.get("SendChannel").setValue(s),this._authService.sendOtp(this.signInForm.value).subscribe(l=>{this._router.navigateByUrl("otp")})):"auth"==s?(this._authService.tfaOption="auth",this._router.navigateByUrl("otp")):(this.signInForm.enable(),this.showAlert=!1)})},e=>{this.signInForm.enable(),this.alert={type:"error",message:"Wrong username or password!"},this.showAlert=!0}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.gz),t.Y36(u.uw),t.Y36(F.e),t.Y36(r.QS),t.Y36(d.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["auth-sign-in"]],viewQuery:function(e,o){if(1&e&&t.Gf(U,5),2&e){let s;t.iGM(s=t.CRH())&&(o.signInNgForm=s.first)}},decls:37,vars:13,consts:[[1,"flex","flex-col","flex-auto","items-center","justify-center"],[1,"flex","items-center","justify-end","w-full","sm:w-auto","py-8","px-4","p-16","rounded-2xl","sm:shadow","md:shadow-none","sm:bg-card"],[1,"w-full","max-w-100","p-6","sm:mx-0"],[1,"w-20"],["src","assets/images/logo/main_logo.png"],[1,"text-4xl","font-extrabold","tracking-tight","leading-tight"],[1,"flex","items-baseline","mt-0.5","font-medium"],["class","mt-8 -mb-4",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-8",3,"formGroup"],["signInNgForm","ngForm"],[1,"w-full"],["id","Username","matInput","",3,"formControlName"],[4,"ngIf"],["id","Password","matInput","","type","password",3,"formControlName","keydown.enter"],["passwordField",""],["mat-icon-button","","type","button","matSuffix","",3,"click"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"inline-flex","items-end","justify-between","w-full","mt-1.5"],[1,"text-md","font-medium","text-primary-500","hover:underline",3,"routerLink"],["type","button","mat-flat-button","",1,"fuse-mat-button-large","w-full","mt-6",3,"color","disabled","click"],[3,"diameter","mode",4,"ngIf"],[1,"flex","items-center","justify-center","mt-6"],[1,"font-medium","text-sm"],[1,"mt-8","-mb-4",3,"appearance","showIcon","type"],[1,"icon-size-5",3,"svgIcon"],[3,"diameter","mode"]],template:function(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"img",4),t.qZA(),t.TgZ(5,"div",5),t._uU(6,"iSIMS Web Portal"),t.qZA(),t.TgZ(7,"div",6)(8,"div"),t._uU(9,"Welcome to the iSIMS Web Portal."),t.qZA()(),t.YNc(10,N,2,5,"fuse-alert",7),t.TgZ(11,"form",8,9)(13,"mat-form-field",10)(14,"mat-label"),t._uU(15,"Username"),t.qZA(),t._UZ(16,"input",11),t.YNc(17,Q,2,0,"mat-error",12),t.qZA(),t.TgZ(18,"mat-form-field",10)(19,"mat-label"),t._uU(20,"Password"),t.qZA(),t.TgZ(21,"input",13,14),t.NdJ("keydown.enter",function(){return o.signIn()}),t.qZA(),t.TgZ(23,"button",15),t.NdJ("click",function(){t.CHM(s);const c=t.MAs(22);return t.KtG(c.type="password"===c.type?"text":"password")}),t.YNc(24,M,1,1,"mat-icon",16),t.YNc(25,Y,1,1,"mat-icon",16),t.qZA(),t.TgZ(26,"mat-error"),t._uU(27," Password is required "),t.qZA()(),t.TgZ(28,"div",17)(29,"a",18),t._uU(30,"Forgot password? "),t.qZA()(),t.TgZ(31,"button",19),t.NdJ("click",function(){return o.signIn()}),t.YNc(32,O,2,0,"span",12),t.YNc(33,j,1,2,"mat-progress-spinner",20),t.qZA()(),t.TgZ(34,"div",21)(35,"span",22),t._uU(36,"v1.0.0"),t.qZA()()()()()}if(2&e){const s=t.MAs(22);t.xp6(10),t.Q6J("ngIf",o.showAlert),t.xp6(1),t.Q6J("formGroup",o.signInForm),t.xp6(5),t.Q6J("formControlName","Username"),t.xp6(1),t.Q6J("ngIf",o.signInForm.get("Username").hasError("required")),t.xp6(4),t.Q6J("formControlName","Password"),t.xp6(3),t.Q6J("ngIf","password"===s.type),t.xp6(1),t.Q6J("ngIf","text"===s.type),t.xp6(4),t.Q6J("routerLink",t.DdM(12,P)),t.xp6(2),t.Q6J("color","primary")("disabled",o.signInForm.disabled),t.xp6(1),t.Q6J("ngIf",!o.signInForm.disabled),t.xp6(1),t.Q6J("ngIf",o.signInForm.disabled)}},dependencies:[d.rH,p.eB,m.nI,m.v_,m.$V,m.nX,h.k0,I.sN,g.Hw,J.W,v.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],encapsulation:2,data:{animation:y.L}}),n})()}];let B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.Bz.forChild(q),p.yu,A.Zh,m.wp,h.x4,I.UK,g.Ps,T.J,Z.fC,b.m]}),n})()}}]);